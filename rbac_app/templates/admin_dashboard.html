{% extends 'base.html' %}

{% block content %}
<div style="padding: 20px;">
    <h1 style="text-align: center; color: #333;">Admin Dashboard</h1>
    <div style="margin: 20px auto; max-width: 800px; text-align: right;">
        <button id="addUserBtn" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
            Add User
        </button>
        
        <script>
            document.getElementById('addUserBtn').addEventListener('click', function() {
                location.href = "{% url 'add_user' %}";
            });
        </script>
        
    </div>

    <table style="width: 100%; border-collapse: collapse; margin: 20px auto; font-size: 16px;">
        <thead>
            <tr style="background-color: #f2f2f2; text-align: left;">
                <th style="border: 1px solid #ddd; padding: 10px;">#</th>
                <th style="border: 1px solid #ddd; padding: 10px;">Username</th>
                <th style="border: 1px solid #ddd; padding: 10px;">Email</th>
                <th style="border: 1px solid #ddd; padding: 10px;">Role</th>
                <th style="border: 1px solid #ddd; padding: 10px; text-align: center;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td style="border: 1px solid #ddd; padding: 10px;">{{ forloop.counter }}</td>
                <td style="border: 1px solid #ddd; padding: 10px;">{{ user.username }}</td>
                <td style="border: 1px solid #ddd; padding: 10px;">{{ user.email }}</td>
                <td style="border: 1px solid #ddd; padding: 10px;">{{ user.role }}</td>
                <td style="border: 1px solid #ddd; padding: 10px; text-align: center;">
                    <button id="addUserBtn" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                        Add User
                    </button>
                    
                    <script>
                        document.getElementById('addUserBtn').addEventListener('click', function() {
                            location.href = "{% url 'add_user' %}";
                        });
                    </script>
                    
                    <button id="deleteUserBtn" data-user-id="{{ user.id }}" 
                    style="background-color: #d9534f; color: white; padding: 5px 10px; border: none; border-radius: 5px; cursor: pointer;">
                Delete
            </button>
            
            <script>
                document.getElementById('deleteUserBtn').addEventListener('click', function() {
                    const userId = this.getAttribute('data-user-id');
                    if (confirm('Are you sure you want to delete this user?')) {
                        location.href = "{% url 'delete_user' userId %}";
                    }
                });
            </script>
            
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center; padding: 20px; border: 1px solid #ddd; color: #888;">
                    No users found.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
